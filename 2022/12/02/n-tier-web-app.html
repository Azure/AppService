<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>How to deploy a secure n-tier web app - Azure App Service</title>
<meta name="description" content="Many applications will consist of more than just a single component. For example, you may have a frontend which is publicly accessible that connects to a backend database, storage account, key vault, another VM, or a combination of these, which make up what’s known as an n-tier application. It’s important that applications like this are architected so that access is limited to privileged individuals and any component that is not intended for public consumptions is locked down to the greatest extent available for your use case.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Azure App Service">
<meta property="og:title" content="How to deploy a secure n-tier web app">
<meta property="og:url" content="https://azure.github.io/AppService/2022/12/02/n-tier-web-app.html">


  <meta property="og:description" content="Many applications will consist of more than just a single component. For example, you may have a frontend which is publicly accessible that connects to a backend database, storage account, key vault, another VM, or a combination of these, which make up what’s known as an n-tier application. It’s important that applications like this are architected so that access is limited to privileged individuals and any component that is not intended for public consumptions is locked down to the greatest extent available for your use case.">



  <meta property="og:image" content="https://azure.github.io/AppService/assets/images/icon.png">





  <meta property="article:published_time" content="2022-12-02T00:00:00+00:00">





  

  


<link rel="canonical" href="https://azure.github.io/AppService/2022/12/02/n-tier-web-app.html">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://azure.github.io/AppService",
      "logo": "https://azure.github.io/AppService/assets/images/icon.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Azure App Service",
      "url": "https://azure.github.io/AppService",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/AppService/feed.xml" type="application/atom+xml" rel="alternate" title="Azure App Service Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/AppService/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<!-- Jekyll env: production -->



    <!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="icon" 
      type="image/png" 
      href="/AppService/media/pages/new_app_service_logo_16.png">
<link rel="shortcut icon" 
      type="image/png" 
      href="/AppService/media/pages/new_app_service_logo_16.png">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/AppService/"><img src="/AppService/media/pages/new_app_service_logo_64.svg" alt=""></a>
        
        <a class="site-title" href="/AppService/">
          Azure App Service
          <span class="site-subtitle">Team Blog</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/AppService/tags/" >Tags</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/AppService/"><span class="nav__sub-title">Home</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Product Areas</span>
        

        
        <ul>
          
            
            

            
            

            <li>
              <a href="/AppService/networking/" class="">Networking & ASE</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/java/" class="">Java</a>
              
                
                
                
                
    
                
                
                <ul>
                  <li style="padding-left: 6px;"><a href="/AppService/java/videos/" class="">Videos</a></li>
                </ul>
                
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/diagnostics/" class="">Diagnostics</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/certsdomains/" class="">Certs and Domains</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/deployment/" class="">Deployment, CI/CD, Slots</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/windows-containers/" class="">Windows Containers</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/sidecars/" class="">Sidecars</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/ai-integration/" class="">AI Integration</a>
              
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            

            <li>
              <a href="https://docs.microsoft.com/azure/app-service/" class="">Documentation</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="https://github.com/Azure/app-service-linux-docs" class="">Linux FAQ</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="https://aka.ms/appservicewindowscontainerwiki" class="">Windows Containers Wiki</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/zero-to-hero/" class="">Zero to Hero tutorials</a>
              
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">More</span>
        

        
        <ul>
          
            
            

            
            

            <li>
              <a href="https://twitter.com/Azure" class="">Twitter</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/feed.xml" class="">RSS Feed</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="https://azure.microsoft.com/blog/" class="">Azure Blog</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="https://azure.microsoft.com/updates/" class="">Azure Updates</a>
              
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Archives</span>
        

        
        <ul>
          
            
            

            
            

            <li>
              <a href="/AppService/2020" class="">2020</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/2019" class="">2019</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/2018" class="">2018</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/2017" class="">2017</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/2016" class="">2016</a>
              
            </li>
          
            
            

            
            

            <li>
              <a href="/AppService/posts/" class="">All posts</a>
              
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="How to deploy a secure n-tier web app">
    <meta itemprop="description" content="Many applications will consist of more than just a single component. For example, you may have a frontend which is publicly accessible that connects to a backend database, storage account, key vault, another VM, or a combination of these, which make up what’s known as an n-tier application. It’s important that applications like this are architected so that access is limited to privileged individuals and any component that is not intended for public consumptions is locked down to the greatest extent available for your use case.">
    <meta itemprop="datePublished" content="December 02, 2022">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">How to deploy a secure n-tier web app
</h1>
          <p class="page__meta">
            
              <i class="far fa-clock" aria-hidden="true"></i> 




  24 minute read

            
            
              • By Jordan Selig
            
            • December 2, 2022
          </p>
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#architecture">Architecture</a>
    <ul>
      <li><a href="#workflow">Workflow</a></li>
    </ul>
  </li>
  <li><a href="#getting-started">Getting started</a></li>
  <li><a href="#create-network-infrastructure">Create network infrastructure</a></li>
  <li><a href="#create-two-instances-of-a-web-app">Create two instances of a web app</a></li>
  <li><a href="#disable-basic-auth-for-the-web-apps">Disable basic auth for the web apps</a></li>
  <li><a href="#configure-virtual-network-integration-for-the-frontend-web-app">Configure virtual network integration for the frontend web app</a></li>
  <li><a href="#create-the-private-endpoint-for-the-backend-web-app">Create the private endpoint for the backend web app</a></li>
  <li><a href="#lock-down-scmadvanced-tool-site">Lock down SCM/advanced tool site</a></li>
  <li><a href="#checkpoint">Checkpoint</a></li>
  <li><a href="#source-code-management">Source code management</a>
    <ul>
      <li><a href="#prerequisites-for-source-code-deployment">Prerequisites for source code deployment</a></li>
      <li><a href="#create-staging-slots-and-configure-continuous-deployment">Create staging slots and configure continuous deployment</a></li>
      <li><a href="#configure-authentication-with-app-service-for-github-actions-with-a-service-principal">Configure authentication with App Service for GitHub Actions with a service principal</a></li>
      <li><a href="#create-the-github-actions-workflow">Create the GitHub Actions workflow</a></li>
      <li><a href="#slot-swap">Slot swap</a></li>
    </ul>
  </li>
  <li><a href="#clean-up-resources">Clean up resources</a></li>
  <li><a href="#deploy-from-armbicep">Deploy from ARM/Bicep</a></li>
</ul>
            </nav>
          </aside>
        
        <p>Many applications will consist of more than just a single component. For example, you may have a frontend which is publicly accessible that connects to a backend database, storage account, key vault, another VM, or a combination of these, which make up what’s known as an n-tier application. It’s important that applications like this are architected so that access is limited to privileged individuals and any component that is not intended for public consumptions is locked down to the greatest extent available for your use case.</p>

<p>In this blog post, we’ll walk through setting up a web app with a secure, network-isolated communication to a backend web app. All traffic will be isolated within your virtual network using virtual network integration and private endpoints. This configuration can be used for a number of use cases and it’s architecture can be extended or modified, for example in <a href="https://azure.github.io/AppService/2021/04/22/Site-with-secure-backend-communication.html">this blog post</a> where a web app securely connects to a backend cognitive service that detects the language of input text. For more information on n-tier applications including additional scenarios and multi-region considerations, see <a href="https://learn.microsoft.com/azure/architecture/reference-architectures/n-tier/multi-region-sql-server">Multi-region N-tier application</a>. Also, see the <a href="https://github.com/Azure/reliable-web-app-pattern-dotnet">Reliable Web App Pattern</a> for additional context and details on deploying more complex scenarios.</p>

<p>This scenario is intentionally kept simple to focus on the key concepts of the architecture and configuration since they are reusable and can easily be replicated across many application patterns. We’ll also be diving into secure source code deployment best practices which is a key part of web app management.</p>

<p>This post is organized into the following steps:</p>

<ol>
  <li>Create network infrastructure</li>
  <li>Create backend web app</li>
  <li>Create frontend web app</li>
  <li>Deploy application source code</li>
</ol>

<h2 id="architecture">Architecture</h2>

<p><img src="/AppService/media/2022/11/n-tier-app-service.png" alt="" /></p>

<h3 id="workflow">Workflow</h3>

<p>The architecture is shown in the diagram above.</p>

<ul>
  <li><strong>Frontend web app</strong>. This architecture uses two web apps - a frontend that is accessible over the public internet, and a private backend web app. The frontend web app is integrated into the virtual network in the subnet with the feature regional VNet integration and it is configured to consume a DNS private zone.</li>
  <li><strong>Backend web app</strong>. The backend web app is only exposed through a private endpoint via another subnet in the virtual network. Direct communication to the backend web app is explicitly blocked. The only resource or principal that is allowed to connect to the backend is the frontend web app using the private endpoint.</li>
</ul>

<p><em>Note that virtual network integration and private endpoints are now available all the way down to the Basic SKU. App Services using the Free tier don’t support this at this time.</em></p>

<h2 id="getting-started">Getting started</h2>

<p>This is the second article in a series focusing on App Service patterns. If you missed the first one on secure multi-region deployments, you can <a href="https://azure.github.io/AppService/2022/12/02/multi-region-web-app.html">find it here</a>.</p>

<p>This guide will use the Azure CLI to set up the environment and deploy the web apps. Additional configurations will be done using the Azure portal as it is easier to demonstrate what is going on there. Keep in mind that everything that is being done in this blog post can be done using the Azure CLI, Azure PowerShell, Azure portal, and Azure Resource Manager (ARM) templates. A complete ARM template that deploys the core resources in this post is given at the end of this post.</p>

<p>An Azure account with an active subscription is required. <a href="https://azure.microsoft.com/free">Create an account for free</a>.</p>

<h2 id="create-network-infrastructure">Create network infrastructure</h2>

<p>First, set up a Resource Group with a Virtual Network. The virtual network should have at least two subnets: one for the virtual network integration and one for the private endpoint. The address-prefix size must be at least /28 for both subnets; small subnets can affect scaling limits and the number of private endpoints. Go with /24 for both subnets if you are not under constraints. Be sure to replace the placeholders for resource group name and virtual network name.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az group create <span class="nt">--name</span> &lt;resource-group-name&gt; <span class="nt">--location</span> eastus
az network vnet create <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--location</span> eastus <span class="nt">--name</span> &lt;vnet-name&gt; <span class="nt">--address-prefixes</span> 10.0.0.0/16
</code></pre></div></div>

<p>For the subnets, there are two settings that you need to pay attention to. This is often set by the portal or scripts, but here it is called out directly. A <a href="https://docs.microsoft.com/azure/virtual-network/subnet-delegation-overview">delegation</a> of “Microsoft.Web/serverfarms” informs the subnet that it’s reserved for virtual network integration.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az network vnet subnet create <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--vnet-name</span> &lt;vnet-name&gt; <span class="nt">--name</span> vnet-integration-subnet <span class="nt">--address-prefixes</span> 10.0.0.0/24 <span class="nt">--delegations</span> Microsoft.Web/serverfarms
az network vnet subnet create <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--vnet-name</span> &lt;vnet-name&gt; <span class="nt">--name</span> private-endpoint-subnet <span class="nt">--address-prefixes</span> 10.0.1.0/24
</code></pre></div></div>

<p>The last part of the network infrastructure is the Private DNS Zone. Private DNS Zones are used to host the DNS records for private endpoints allowing clients to find the backend services by name. We’ll be creating the private endpoint using the portal, so the Private DNS Zone will be created automatically for us. Go <a href="https://docs.microsoft.com/azure/private-link/private-endpoint-overview">here for a primer on Azure Private Endpoints</a> and <a href="https://docs.microsoft.com/azure/private-link/private-endpoint-dns">go here for how DNS Zones are used with private endpoints</a>.</p>

<h2 id="create-two-instances-of-a-web-app">Create two instances of a web app</h2>

<p>You’ll need two instances of a web app for this tutorial. You’ll need to use at least the Basic SKU in order to be able to use virtual network integration and private endpoints. You’ll take care of the vnet integration and additional configurations later on - first you’ll get the apps deployed. You’ll first deploy a single App Service plan. You’ll then deploy two web apps in that App Service plan.</p>

<p>Run the following command to create the App Service plan. Replace the placeholders for App Service plan name and resource group name.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az appservice plan create <span class="nt">--name</span> &lt;app-service-plan-name&gt; <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--is-linux</span> <span class="nt">--location</span> eastus <span class="nt">--sku</span> P1V2
</code></pre></div></div>

<p>Once the App Service plan is created, run the following commands to create the web apps. Replace the placeholders with your globally distinct web app names and your App Service plan name. If you’re following along in this tutorial, you’ll be deploying a Node.js app later on, so we’ll set the runtime now. Feel free to change this value based on the app you want to deploy. Run <code class="language-plaintext highlighter-rouge">az webapp list-runtimes</code> for a list of the possible runtimes you can choose from.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az webapp create <span class="nt">--name</span> &lt;frontend-web-app-name&gt; <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--plan</span> &lt;app-service-plan-name&gt; <span class="nt">--runtime</span> <span class="s2">"NODE:18-lts"</span>
az webapp create <span class="nt">--name</span> &lt;backend-web-app-name&gt; <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--plan</span> &lt;app-service-plan-name&gt; <span class="nt">--runtime</span> <span class="s2">"NODE:18-lts"</span>
</code></pre></div></div>

<h2 id="disable-basic-auth-for-the-web-apps">Disable basic auth for the web apps</h2>

<p>Consider <a href="https://azure.github.io/AppService/2020/08/10/securing-data-plane-access.html">disabling basic auth on App Service</a>, which limits access to the FTP and SCM endpoints to users that are backed by Azure Active Directory (AAD). Disabling basic auth will require additional steps to configure continuous deployment. We’ll go through this as well later on in this post.</p>

<p>To disable FTP access to the site, run the following CLI command. Replace the placeholders with your resource group and site name. Be sure to run this command for each of your apps.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az resource update <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--name</span> ftp <span class="nt">--namespace</span> Microsoft.Web <span class="nt">--resource-type</span> basicPublishingCredentialsPolicies <span class="nt">--parent</span> sites/&lt;web-app-name&gt; <span class="nt">--set</span> properties.allow<span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<p>To disable basic auth access to the WebDeploy port and SCM site, run the following CLI command. Replace the placeholders with your resource group and site name.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az resource update <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--name</span> scm <span class="nt">--namespace</span> Microsoft.Web <span class="nt">--resource-type</span> basicPublishingCredentialsPolicies <span class="nt">--parent</span> sites/&lt;web-app-name&gt; <span class="nt">--set</span> properties.allow<span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<p>For more information on disabling basic auth including how to test and monitor logins, see <a href="https://azure.github.io/AppService/2020/08/10/securing-data-plane-access.html">Disabling basic auth on App Service</a>.</p>

<h2 id="configure-virtual-network-integration-for-the-frontend-web-app">Configure virtual network integration for the frontend web app</h2>

<p>The <a href="https://learn.microsoft.com/azure/app-service/overview-vnet-integration">virtual network integration feature</a> allows outbound traffic to flow directly into the virtual network. We’ll use the portal to configure this as well as the private endpoint in the next step.</p>

<ol>
  <li>In the Azure portal, go to your frontend web app and then go to the <strong>Networking</strong> page.</li>
  <li>
    <p>Select <strong>VNet Integration</strong>.</p>

    <p><img src="/AppService/media/2022/11/vnet-integration-1.png" alt="" /></p>
  </li>
  <li>Select <strong>+ Add VNet</strong>.</li>
  <li>Select the virtual network you created earlier.</li>
  <li>For <strong>Subnet</strong>, select “Select Existing” and then select the “vnet-integration-subnet”.</li>
  <li>Select <strong>OK</strong> to save your configuration.</li>
</ol>

<p>You can now browse to the web app and all <strong>outbound</strong> traffic from the frontend web app will be routed through the virtual network.</p>

<h2 id="create-the-private-endpoint-for-the-backend-web-app">Create the private endpoint for the backend web app</h2>

<p>The last part of the core infrastructure setup is to create the <a href="https://learn.microsoft.com/azure/app-service/networking/private-endpoint">private endpoint</a> to allow secure communication between your frontend and your backend. Adding a private endpoint by default disables all public access to your app. By enabling a private endpoint on your backend web app, all inbound traffic will therefore use the private endpoint to reach it. The only resources that are allowed to use the private endpoint to connect to your backend web app are the ones in your virtual network.</p>

<ol>
  <li>In the Azure portal, go to your backend web app and then go to the <strong>Networking</strong> page. Under <strong>Inbound address</strong>, you’ll see the public IP that was automatically delegated to your web app. Note that when you add the private endpoint, this will change to a private IP from your Azure virtual network address space.</li>
  <li>
    <p>Select <strong>Private endpoints</strong>.</p>

    <p><img src="/AppService/media/2022/11/private-endpoint-1.png" alt="" /></p>
  </li>
  <li>Select <strong>+ Add</strong>.</li>
  <li>Give your private endpoint a name, select the virtual network you created earlier, and select the “private-endpoint-subnet”.</li>
  <li>Make sure <strong>Integrate with private DNS zone</strong> is set to “Yes”. If you want to set up your own Private DNS Zone, you can find details for that <a href="https://learn.microsoft.com/azure/app-service/networking/private-endpoint#dns">here</a>.</li>
  <li>Select <strong>OK</strong> to save your configuration.</li>
</ol>

<p>Creating the private endpoint from the portal is the simplest method as it does a number of actions in the background for you including linking the zone to your virtual network. If you create the Private DNS Zone manually, you will need to create the link manually.</p>

<p>If you go back to the <strong>Networking</strong> page for your backend web app, you’ll see that the inbound address has changed to a private IP address from your virtual network. You’ll also see that access restrictions have turned on. If you view the <strong>Access restriction (preview)</strong>, you see public access has been disabled. Disabling public network access blocks all incoming traffic except the traffic that comes from private endpoints.</p>

<p><img src="/AppService/media/2022/11/private-endpoint-2.png" alt="" /></p>

<p><img src="/AppService/media/2022/11/access-restriction-1.png" alt="" /></p>

<h2 id="lock-down-scmadvanced-tool-site">Lock down SCM/advanced tool site</h2>

<p>Earlier on when you were creating the web apps, you disabled basic authentication to the WebDeploy port and SCM site. You’ll want to also disable all public access to the SCM site. This has already been done for the backend web app when you added the private endpoint. You will only need to do this for the frontend web app. Doing this, however, limits how code can be deployed to your app. Later on, we’ll walk through how to give a service principal access to deploy your source code. To disable public access, navigate to the <strong>Access restriction (preview)</strong> page for your frontend web app and select the <em>Advanced tool site</em> tab. For the <em>Unmatched rule action</em>, select “Deny”, then <strong>Save</strong>, and <strong>Continue</strong>. You can’t deny all public access using the checkbox at the top because that will deny public access to your frontend’s main site as well. Doing this would prevent your users from being able to access your frontend which is not what we want.</p>

<p><img src="/AppService/media/2022/11/access-restriction-scm.png" alt="" /></p>

<h2 id="checkpoint">Checkpoint</h2>

<p>At this point, all of the baseline infrastructure has been deployed and you are ready to deploy your source code. We’ll walk through how to do that securely in the next part of the blog post, but first, let’s validate our connections and app access.</p>

<p>Starting with the backend, try navigating directly to your backend’s endpoint. This can be found on the <strong>Overview</strong> page for the backend web app and should be in the format <em><a href="https://backend-web-app-name.azurewebsites.net">https://backend-web-app-name.azurewebsites.net</a></em>. If you’ve configured things correctly, public access should be blocked and you should get an error page.</p>

<p><img src="/AppService/media/2022/11/backend-forbidden.png" alt="" /></p>

<p>You should see a similar error page when trying to navigate to the backend’s SCM site. The endpoint for that is in the format <em><a href="https://backend-web-app-name.scm.azurewebsites.net">https://backend-web-app-name.scm.azurewebsites.net</a></em>.</p>

<p>To validate the frontend, we’ll need to ensure it is publicly accessible and that it can reach the backend only using the private endpoint.</p>

<p>Try navigating to your frontend’s endpoint. You should see content similar to what is shown below. This means your frontend is publicly accessible and ready for your source code as intended. Try navigating to your frontend’s SCM site as well and confirm that access is denied.</p>

<p><img src="/AppService/media/2022/11/frontend-available.png" alt="" /></p>

<p>To validate the connection between the frontend and the backend, you’ll need access to the SCM site. For this, the simplest method if you’ve been following along is you can add a temporary rule to your frontend’s access restrictions that allows access from your IP. See the below screenshot for an example. For source, use your IP address.</p>

<p><img src="/AppService/media/2022/11/scm-ip-access.png" alt="" /></p>

<p>Navigate to the SCM site for your frontend by going to <em><a href="https://frontend-web-app-name.scm.azurewebsites.net/">https://frontend-web-app-name.scm.azurewebsites.net/</a></em>. If you can’t access it, make sure you’ve added the rule for your IP as shown above. Select <strong>SSH</strong> from the menu bar at the top. Doing this creates an SSH session on your frontend’s instances. Once that loads, you’re going to do an “nslookup” on your backend to confirm that it can be reached from the frontend using the private endpoint. Type “nslookup backend-web-app-name.azurewebsites.net”. Under the “Non-authoritative answer”, it should resolve the private IP address you noted earlier. You can also do a “curl” on your backend’s endpoint to display the backend’s current site contents. For now, curl will display the HTML for the empty web app.</p>

<p><img src="/AppService/media/2022/11/frontend-ssh.png" alt="" /></p>

<p>Repeat the same nslookup and curl commands from another terminal (one that is not an SSH session from your frontend’s instances). The nslookup will return the public IP for the backend web app. Since we blocked public access to the backend web app, if you try to reach the public IP, you will get an access denied error which means this site will not be accessible from the public internet, which is what we want. The nslookup doesn’t resolve the private IP because that can only be reached from within the virtual network using the private endpoint and only the frontend web app is within the virtual network. If you try to do a curl on the backend from an external terminal, you’ll see the HTML returns “Web App - Unavailable”, which is the HTML for the error page you saw earlier when you tried navigating to the backend in your browser.</p>

<p><img src="/AppService/media/2022/11/frontend-ssh-ext.png" alt="" /></p>

<p>Now that you’ve validated your connections, you’re all set to deploy some code. Make sure you remove the rule that allows access to your frontend’s SCM site if you no longer need it.</p>

<h2 id="source-code-management">Source code management</h2>

<p>A number of best practices were described in the previous <a href="https://azure.github.io/AppService/2022/12/02/multi-region-web-app.html">blog post</a>, which went over how to manage source code across multiple regions. Those same concepts can be applied here. For completeness, we’ll go over the important parts to get your n-tier app up and running.</p>

<h3 id="prerequisites-for-source-code-deployment">Prerequisites for source code deployment</h3>

<p>We’ll be using a two Node.js apps hosted on GitHub. If you don’t already have a GitHub account, <a href="https://github.com/">create an account for free</a>.</p>

<ol>
  <li>Go to the <a href="https://github.com/seligj95/nodejs-backend">Node.js backend sample app</a>. This is a simple Hello World app.</li>
  <li>Select the <strong>Fork</strong> button in the upper right on the GitHub page.</li>
  <li>Select the <strong>Owner</strong> and leave the default Repository name.</li>
  <li>Select <strong>Create</strong> fork.</li>
  <li>Repeat the same process for the <a href="https://github.com/seligj95/nodejs-frontend">Node.js frontend sample app</a>. This is a basic web scraping app that I built specifically for this blog post.</li>
</ol>

<p>At this point, your source code is all set up and ready to be deployed to your apps.</p>

<h3 id="create-staging-slots-and-configure-continuous-deployment">Create staging slots and configure continuous deployment</h3>

<p>Configuring continuous deployment for production apps is not recommended because it makes testing and validation more complicated. Instead, use a combination of staging slots and slot swap to move code from your testing/staging environment to production.</p>

<p>We’ll create deployment slots for each of our apps and then walk through how to slot swap to get the code into production.</p>

<ol>
  <li>Go to one of your apps.</li>
  <li>In the left pane, select <strong>Deployment slots</strong>.</li>
  <li>Select <strong>+ Add Slot</strong>.</li>
  <li>Input “stage” for <em>Name</em> and to keep things simple, we’ll clone the settings from the production slot by selecting the app’s name from the <em>Clone settings from:</em> dropdown.</li>
  <li>Select <strong>Close</strong> at the bottom of the slot configuration pane.</li>
  <li>Select the newly created stage slot.</li>
</ol>

<p>Cloning settings to a slot doesn’t clone every possible setting. In this case, depending on how you’ll be using the slots, you’ll need to disable basic auth for both app slots, create another private endpoint for the backend slot, and implement virtual network integration for the frontend slot. The process for this is the same as before. Pay attention to the access restrictions on the SCM sites if you do recreate the private endpoint as that will disable public access to it and prevent GitHub from reaching your staging slots. You’ll need to allow public access to the Advanced tools site as was done in the previous <a href="https://azure.github.io/AppService/2022/12/02/multi-region-web-app.html#create-the-gitHub-actions-workflow">blog post</a>.</p>

<p>To disable basic auth for the slots, make sure you update the <code class="language-plaintext highlighter-rouge">--parent</code> parameter as shown in the below example. Repeat the same command for “ftp” and for your other app as you did previously.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az resource update <span class="nt">--resource-group</span> &lt;resource-group-name&gt; <span class="nt">--name</span> scm <span class="nt">--namespace</span> Microsoft.Web <span class="nt">--resource-type</span> basicPublishingCredentialsPolicies <span class="nt">--parent</span> sites/&lt;web-app-name&gt;/slots/&lt;slot-name&gt; <span class="nt">--set</span> properties.allow<span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<p>Now that the staging slots are properly configured and locked down, you can configure continuous deployment.</p>

<ol>
  <li>
    <p>In the left pane, select <strong>Deployment Center</strong> and make sure you’re on the <strong>Settings</strong> tab.</p>

    <p><img src="/AppService/media/2022/11/deployment-source.png" alt="" /></p>
  </li>
  <li>For <strong>Source</strong>, select “GitHub”.</li>
  <li>If you’re deploying from GitHub for the first time, select <strong>Authorize</strong> and follow the authorization prompts.</li>
  <li>
    <p>After you authorize your Azure account with GitHub, select the Organization, Repository, and Branch to configure CI/CD as shown below. If you can’t find an organization or repository, you might need to enable more permissions on GitHub. For more information, see <a href="https://docs.github.com/organizations/managing-user-access-to-your-organizations-repositories">Managing access to your organization’s repositories</a>.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Organization</td>
          <td><code class="language-plaintext highlighter-rouge">&lt;your GitHub username&gt;</code></td>
        </tr>
        <tr>
          <td>Repository</td>
          <td>nodejs-backend</td>
        </tr>
        <tr>
          <td>Branch</td>
          <td>main</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>Leave the remaining defaults and select <strong>Save</strong>. You can track the deployment and commits in the <strong>Logs</strong> tab in the <strong>Deployment Center</strong> to monitor progress.</li>
  <li>Repeat the above steps for your other app.</li>
</ol>

<p>Since you locked down the SCM sites and disabled basic auth for your apps, the default method for deploying code with GitHub Actions isn’t going to work. You’ll see that the deployment failed if you review the logs. This is because the default method uses a publishing profile. Instead, you have two options to authenticate with App Service for GitHub Actions - using a service principal or OpenID Connect. We have a detailed doc that goes through how to do this for each of your options - <a href="https://learn.microsoft.com/azure/app-service/deploy-github-actions?tabs=userlevel">Deploy to App Service using GitHub Actions</a>. We also have guidance for <a href="https://learn.microsoft.com/azure/app-service/deploy-azure-pipelines?tabs=yaml">Azure DevOps using Azure Pipelines</a>. Additionally, for more info on this topic as well as additional examples, we have a series of blog posts that walk through scenarios you may be interested in.</p>

<ul>
  <li><a href="https://azure.github.io/AppService/2021/01/04/deploying-to-network-secured-sites.html">Deploying to Network-secured sites</a></li>
  <li><a href="https://azure.github.io/AppService/2021/03/01/deploying-to-network-secured-sites-2.html">Deploying to Network-secured sites, Part 2</a></li>
</ul>

<p>For this blog post, we’ll walk through how to authenticate with App Service for GitHub Actions using a service principal.</p>

<h3 id="configure-authentication-with-app-service-for-github-actions-with-a-service-principal">Configure authentication with App Service for GitHub Actions with a service principal</h3>

<ol>
  <li>
    <p>Run the following command to create the <a href="https://learn.microsoft.com/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object">service principal</a>. Replace the placeholders with your subscription ID, resource group name, and frontend and backend app names. The output is a JSON object with the role assignment credentials that provide access to your App Service apps. Copy this JSON object for the next step. It will include your client secret which will only be visible at this time. It is always a good practice to grant minimum access. The scope in this example is limited to the specific frontend and backend web apps and not the entire resource group.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> az ad sp create-for-rbac <span class="nt">--name</span> <span class="s2">"myApp"</span> <span class="nt">--role</span> contributor <span class="nt">--scopes</span> /subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;group-name&gt;/providers/Microsoft.Web/sites/&lt;frontend-web-app-name&gt; /subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;group-name&gt;/providers/Microsoft.Web/sites/&lt;backend-web-app-name&gt; <span class="nt">--sdk-auth</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>You need to provide your service principal’s credentials to the login action as part of the GitHub Action workflow you will be using. These values can either be provided directly in the workflow or can be stored in a GitHub secret and referenced in your workflow. Saving the values as GitHub secrets is the more secure option.</p>
    <ol>
      <li>Open one of your GitHub repositories and go to <strong>Settings</strong> &gt; <strong>Security</strong> &gt; <strong>Secrets and variables</strong> &gt; <strong>Actions</strong> &gt; <strong>New repository secret</strong>.</li>
      <li>Paste the entire JSON output from the Azure CLI command from the initial step into the secret’s value field. Give the secret the name <code class="language-plaintext highlighter-rouge">AZURE_CREDENTIALS</code>. When you configure the workflow file later, you use the secret for the input <code class="language-plaintext highlighter-rouge">creds</code> of the Azure Login action.</li>
      <li>
        <p>Create the following secrets.</p>

        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>AZURE_APP_ID</td>
              <td><code class="language-plaintext highlighter-rouge">&lt;application/client-id&gt;</code></td>
            </tr>
            <tr>
              <td>AZURE_PASSWORD</td>
              <td><code class="language-plaintext highlighter-rouge">&lt;client-secret&gt;</code></td>
            </tr>
            <tr>
              <td>AZURE_TENANT_ID</td>
              <td><code class="language-plaintext highlighter-rouge">&lt;tenant-id&gt;</code></td>
            </tr>
            <tr>
              <td>AZURE_SUBSCRIPTION_ID</td>
              <td><code class="language-plaintext highlighter-rouge">&lt;subscription-id&gt;</code></td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>Repeat this process for your other repository.</li>
    </ol>
  </li>
</ol>

<h3 id="create-the-github-actions-workflow">Create the GitHub Actions workflow</h3>

<p>Now that you have a service principal that can access your App Services, you need to edit the default workflow that was created for your apps when you configured continuous deployment so that it uses your service principal to authenticate instead of the publishing profile. For sample workflows, see the “Service principal” tab in <a href="https://learn.microsoft.com/azure/app-service/deploy-github-actions?tabs=userlevel#deploy-to-app-service">Deploy to App Service</a>. If you’ve been following along, use the below workflow.</p>

<ol>
  <li>Open your backend app’s GitHub repository and go to the <code class="language-plaintext highlighter-rouge">nodejs-backend/.github/workflows/</code> directory. You’ll see the autogenerated workflow.</li>
  <li>
    <p>Select the “pencil” button in the top right to edit the file. Replace the contents with the below, which assumes you created the GitHub secrets earlier for your credential, update the placeholders under “env”, and then commit directly to the main branch. This commit will trigger the GitHub Action to run again and deploy your code, this time using the service principal to authenticate.</p>

    <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="na">name</span><span class="pi">:</span> <span class="s">Build and deploy Node.js app to Azure Web App</span>
    
 <span class="na">on</span><span class="pi">:</span>
   <span class="na">push</span><span class="pi">:</span>
     <span class="na">branches</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">main</span>
   <span class="na">workflow_dispatch</span><span class="pi">:</span>
    
 <span class="na">env</span><span class="pi">:</span>
   <span class="na">AZURE_WEBAPP_NAME</span><span class="pi">:</span> <span class="s">&lt;web-app-name&gt;</span>   <span class="c1"># set this to your application's name</span>
   <span class="na">NODE_VERSION</span><span class="pi">:</span> <span class="s1">'</span><span class="s">18.x'</span>                <span class="c1"># set this to the node version to use</span>
   <span class="na">AZURE_WEBAPP_PACKAGE_PATH</span><span class="pi">:</span> <span class="s1">'</span><span class="s">.'</span>      <span class="c1"># set this to the path to your web app project, defaults to the repository root</span>
   <span class="na">AZURE_WEBAPP_SLOT_NAME</span><span class="pi">:</span> <span class="s">stage</span>       <span class="c1"># set this to your application's slot name</span>
    
 <span class="na">jobs</span><span class="pi">:</span>
   <span class="na">build</span><span class="pi">:</span>
     <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
     <span class="na">steps</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
            
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set up Node.js version</span>
         <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v1</span>
         <span class="na">with</span><span class="pi">:</span>
           <span class="na">node-version</span><span class="pi">:</span> <span class="s">${{ env.NODE_VERSION }}</span>
    
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">npm install, build</span>
         <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
           <span class="s">npm install</span>
           <span class="s">npm run build --if-present</span>
    
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload artifact for deployment job</span>
         <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-artifact@v2</span>
         <span class="na">with</span><span class="pi">:</span>
           <span class="na">name</span><span class="pi">:</span> <span class="s">node-app</span>
           <span class="na">path</span><span class="pi">:</span> <span class="s">.</span>
    
   <span class="na">deploy</span><span class="pi">:</span>
     <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
     <span class="na">needs</span><span class="pi">:</span> <span class="s">build</span>
     <span class="na">environment</span><span class="pi">:</span>
       <span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">stage'</span>
       <span class="na">url</span><span class="pi">:</span> <span class="s">${{ steps.deploy-to-webapp.outputs.webapp-url }}</span>
    
     <span class="na">steps</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Download artifact from build job</span>
         <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v2</span>
         <span class="na">with</span><span class="pi">:</span>
           <span class="na">name</span><span class="pi">:</span> <span class="s">node-app</span>

       <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">azure/login@v1</span>
         <span class="na">with</span><span class="pi">:</span>
           <span class="na">creds</span><span class="pi">:</span> <span class="pi">|</span>
             <span class="s">{</span>
               <span class="s">"clientId": "${{ secrets.AZURE_APP_ID }}",</span>
               <span class="s">"clientSecret":  "${{ secrets.AZURE_PASSWORD }}",</span>
               <span class="s">"subscriptionId": "${{ secrets.AZURE_SUBSCRIPTION_ID }}",</span>
               <span class="s">"tenantId": "${{ secrets.AZURE_TENANT_ID }}"</span>
             <span class="s">}</span>
    
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Azure</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">App'</span>
         <span class="na">id</span><span class="pi">:</span> <span class="s">deploy-to-webapp</span>
         <span class="na">uses</span><span class="pi">:</span> <span class="s">azure/webapps-deploy@v2</span>
         <span class="na">with</span><span class="pi">:</span>
           <span class="na">app-name</span><span class="pi">:</span> <span class="s">${{ env.AZURE_WEBAPP_NAME }}</span>
           <span class="na">slot-name</span><span class="pi">:</span> <span class="s">${{ env.AZURE_WEBAPP_SLOT_NAME }}</span>
           <span class="na">package</span><span class="pi">:</span> <span class="s">${{ env.AZURE_WEBAPP_PACKAGE_PATH }}</span>
              
       <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">logout</span>
         <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
           <span class="s">az logout</span>
</code></pre></div>    </div>
  </li>
  <li>Repeat this process for for the frontend app. The workflow can be found in <code class="language-plaintext highlighter-rouge">nodejs-frontend/.github/workflows/</code>.</li>
</ol>

<p>After a couple minutes, the deployments to the two app’s staging slots will finish. Your backend web app slot is locked down, but you can update the access restrictions for it if you want to validate that the code was deployed. Alternatively, you can skip that and go straight to the frontend app slot and test from there.</p>

<p>Navigate to your frontend in a browser. The URL should look like <em><a href="https://frontend-web-app-name-stage.azurewebsites.net">https://frontend-web-app-name-stage.azurewebsites.net</a></em>. The frontend app is a simple web scraper that will display the HTML body of a website. All it’s doing is calling the backend app and if it can reach the backend, it will display the site contents of the backend web app. I designed this site to work specifically with the provided backend web app. The web scraper will work with other sites, but the HTML it will return will be messy. Get your backend slot’s URL and paste that into the textbox. Hit “Go”, and after a couple seconds, you should see “Hello from the backend web app!” which is the site contents for the backend. If the app crashes, that means your access restrictions or private endpoint are misconfigured. If you didn’t set up the private endpoint and virtual network infrastructure for your slots, you can skip this testing as you’ve already validated it works in production. If all goes well, you’re ready to slot swap into production.</p>

<h3 id="slot-swap">Slot swap</h3>

<p>Once you’re done testing and validating, you can perform a <a href="https://learn.microsoft.com/azure/app-service/deploy-staging-slots#swap-two-slots">slot swap</a> from your staging site to your production site for each of your apps. During a slot swap, the App Service platform <a href="https://learn.microsoft.com/azure/app-service/deploy-staging-slots#swap-operation-steps">ensures the target slot doesn’t experience downtime</a>.</p>

<p>To perform the swap:</p>

<ol>
  <li>
    <p>Go to your app’s <strong>Deployment slots</strong> page and select <strong>Swap</strong>. The <strong>Swap</strong> dialog box shows settings in the selected source and target slots that will be changed.</p>

    <p><img src="/AppService/media/2022/11/swapbuttonbar.png" alt="" /></p>
  </li>
  <li>
    <p>Select the desired <strong>Source</strong> and <strong>Target</strong> slots. Also, select the <strong>Source Changes</strong> and <strong>Target Changes</strong> tabs and verify that the configuration changes are expected. When you’re finished, you can swap the slots immediately by selecting <strong>Swap</strong>.</p>

    <p><img src="/AppService/media/2022/11/swapimmediately.png" alt="" /></p>
  </li>
  <li>
    <p>Repeat the process for your other app.</p>
  </li>
</ol>

<p>After a few minutes, you can navigate to your production frontend app to validate the slot swap succeeded. You should copy and paste your production backend app’s URL into the textbox and confirm you get the message “Hello from the backend web app!”. If you do, congrats, you completed the tutorial! If the app crashes, go back through this post to ensure your connections are configured properly.</p>

<p>At this point, your apps are up and running and any changes you make to your source code will automatically trigger an update to both of your staging apps. You can then repeat the slot swap process described above when you’re ready to move that code into production.</p>

<h2 id="clean-up-resources">Clean up resources</h2>

<p>After you’re done, you can remove all the items you created. Deleting a resource group also deletes its contents.</p>

<h2 id="deploy-from-armbicep">Deploy from ARM/Bicep</h2>

<p>All of the resources in this post can be deployed using an ARM/Bicep template. A sample template is shown below, which creates empty apps following the security best practices outlined in this post. You’ll need to configure the slots and deployment source as well as the service principal once the template resources are created. To learn how to deploy ARM/Bicep templates, see <a href="https://learn.microsoft.com/azure/azure-resource-manager/bicep/deploy-cli">How to deploy resources with Bicep and Azure CLI</a>.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@</span><span class="s">description('Name of the VNet')</span>
<span class="s">param virtualNetworkName string = 'vnet-ntier'</span>

<span class="err">@</span><span class="s">description('Name of the Web Farm')</span>
<span class="s">param serverFarmName string = 'serverfarm-ntier'</span>

<span class="err">@</span><span class="s">description('Backend name must be unique DNS name worldwide')</span>
<span class="s">param site1_Name string = 'backend-${uniqueString(resourceGroup().id)}'</span>

<span class="err">@</span><span class="s">description('Frontend name must be unique DNS name worldwide')</span>
<span class="s">param site2_Name string = 'frontend-${uniqueString(resourceGroup().id)}'</span>

<span class="err">@</span><span class="s">description('CIDR of your VNet')</span>
<span class="s">param virtualNetwork_CIDR string = '10.200.0.0/16'</span>

<span class="err">@</span><span class="s">description('Name of the subnet')</span>
<span class="s">param subnet1Name string = 'PrivateEndpointSubnet'</span>

<span class="err">@</span><span class="s">description('Name of the subnet')</span>
<span class="s">param subnet2Name string = 'VnetIntegrationSubnet'</span>

<span class="err">@</span><span class="s">description('CIDR of your subnet')</span>
<span class="s">param subnet1_CIDR string = '10.200.1.0/24'</span>

<span class="err">@</span><span class="s">description('CIDR of your subnet')</span>
<span class="s">param subnet2_CIDR string = '10.200.2.0/24'</span>

<span class="err">@</span><span class="s">description('Location for all resources.')</span>
<span class="s">param location string = resourceGroup().location</span>

<span class="err">@</span><span class="s">description('SKU name, must be minimum P1v2')</span>
<span class="err">@</span><span class="s">allowed([</span>
  <span class="s">'P1v2'</span>
  <span class="s">'P2v2'</span>
  <span class="s">'P3v2'</span>
<span class="err">]</span><span class="s">)</span>
<span class="s">param skuName string = 'P1v2'</span>

<span class="err">@</span><span class="s">description('SKU size, must be minimum P1v2')</span>
<span class="err">@</span><span class="s">allowed([</span>
  <span class="s">'P1v2'</span>
  <span class="s">'P2v2'</span>
  <span class="s">'P3v2'</span>
<span class="err">]</span><span class="s">)</span>
<span class="s">param skuSize string = 'P1v2'</span>

<span class="err">@</span><span class="s">description('SKU family, must be minimum P1v2')</span>
<span class="err">@</span><span class="s">allowed([</span>
  <span class="s">'P1v2'</span>
  <span class="s">'P2v2'</span>
  <span class="s">'P3v2'</span>
<span class="err">]</span><span class="s">)</span>
<span class="s">param skuFamily string = 'P1v2'</span>

<span class="err">@</span><span class="s">description('Name of your Private Endpoint')</span>
<span class="s">param privateEndpointName string = 'PrivateEndpoint1'</span>

<span class="err">@</span><span class="s">description('Link name between your Private Endpoint and your Web App')</span>
<span class="s">param privateLinkConnectionName string = 'PrivateEndpointLink1'</span>

<span class="s">var webapp_dns_name = '.azurewebsites.net'</span>
<span class="s">var privateDNSZoneName = 'privatelink.azurewebsites.net'</span>
<span class="s">var SKU_tier = 'PremiumV2'</span>

<span class="s">resource virtualNetwork 'Microsoft.Network/virtualNetworks@2020-06-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">virtualNetworkName</span>
  <span class="s">location</span><span class="err">:</span> <span class="s">location</span>
  <span class="s">properties</span><span class="err">:</span> <span class="pi">{</span>
    <span class="nv">addressSpace</span><span class="pi">:</span> <span class="pi">{</span>
      <span class="nv">addressPrefixes</span><span class="pi">:</span> <span class="pi">[</span>
        <span class="nv">virtualNetwork_CIDR</span>
      <span class="pi">]</span>
    <span class="pi">}</span>
    <span class="nv">subnets</span><span class="pi">:</span> <span class="pi">[</span>
      <span class="pi">{</span>
        <span class="nv">name</span><span class="pi">:</span> <span class="nv">subnet1Name</span>
        <span class="nv">properties</span><span class="pi">:</span> <span class="pi">{</span>
          <span class="nv">addressPrefix</span><span class="pi">:</span> <span class="nv">subnet1_CIDR</span>
          <span class="nv">privateEndpointNetworkPolicies</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Disabled'</span>
        <span class="pi">}</span>
      <span class="pi">}</span>
      <span class="pi">{</span>
        <span class="nv">name</span><span class="pi">:</span> <span class="nv">subnet2Name</span>
        <span class="nv">properties</span><span class="pi">:</span> <span class="pi">{</span>
          <span class="nv">addressPrefix</span><span class="pi">:</span> <span class="nv">subnet2_CIDR</span>
          <span class="nv">delegations</span><span class="pi">:</span> <span class="pi">[</span>
            <span class="pi">{</span>
              <span class="nv">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">delegation'</span>
              <span class="nv">properties</span><span class="pi">:</span> <span class="pi">{</span>
                <span class="nv">serviceName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Microsoft.Web/serverfarms'</span>
              <span class="pi">}</span>
            <span class="pi">}</span>
          <span class="pi">]</span>
          <span class="nv">privateEndpointNetworkPolicies</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Enabled'</span>
        <span class="pi">}</span>
      <span class="pi">}</span>
    <span class="pi">]</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource serverFarm 'Microsoft.Web/serverfarms@2020-06-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">serverFarmName</span>
  <span class="s">location</span><span class="err">:</span> <span class="s">location</span>
  <span class="s">sku</span><span class="err">:</span> <span class="pi">{</span>
    <span class="nv">name</span><span class="pi">:</span> <span class="nv">skuName</span>
    <span class="nv">tier</span><span class="pi">:</span> <span class="nv">SKU_tier</span>
    <span class="nv">size</span><span class="pi">:</span> <span class="nv">skuSize</span>
    <span class="nv">family</span><span class="pi">:</span> <span class="nv">skuFamily</span>
    <span class="nv">capacity</span><span class="pi">:</span> <span class="nv">1</span>
  <span class="pi">}</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s1">'</span><span class="s">app'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">reserved</span><span class="pi">:</span> <span class="nv">true</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp1 'Microsoft.Web/sites@2020-06-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">site1_Name</span>
  <span class="s">location</span><span class="err">:</span> <span class="s">location</span>
  <span class="s">kind</span><span class="err">:</span> <span class="s1">'</span><span class="s">app'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">serverFarmId</span><span class="pi">:</span> <span class="nv">serverFarm.id</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource ftpPolicy1 'Microsoft.Web/sites/basicPublishingCredentialsPolicies@2022-03-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">ftp'</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s1">'</span><span class="s">string'</span>
  <span class="na">parent</span><span class="pi">:</span> <span class="s">webApp1</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s">location</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">allow</span><span class="pi">:</span> <span class="nv">false</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource scmPolicy1 'Microsoft.Web/sites/basicPublishingCredentialsPolicies@2022-03-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">scm'</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s1">'</span><span class="s">string'</span>
  <span class="na">parent</span><span class="pi">:</span> <span class="s">webApp1</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s">location</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">allow</span><span class="pi">:</span> <span class="nv">false</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp2 'Microsoft.Web/sites@2020-06-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">site2_Name</span>
  <span class="s">location</span><span class="err">:</span> <span class="s">location</span>
  <span class="s">kind</span><span class="err">:</span> <span class="s1">'</span><span class="s">app'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">serverFarmId</span><span class="pi">:</span> <span class="nv">serverFarm.id</span>
    <span class="nv">virtualNetworkSubnetId</span><span class="pi">:</span> <span class="nv">resourceId('Microsoft.Network/virtualNetworks/subnets'</span><span class="pi">,</span> <span class="nv">virtualNetwork.name</span><span class="pi">,</span> <span class="nv">subnet2Name)</span>
    <span class="nv">vnetRouteAllEnabled</span><span class="pi">:</span> <span class="nv">true</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource ftpPolicy2 'Microsoft.Web/sites/basicPublishingCredentialsPolicies@2022-03-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">ftp'</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s1">'</span><span class="s">string'</span>
  <span class="na">parent</span><span class="pi">:</span> <span class="s">webApp2</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s">location</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">allow</span><span class="pi">:</span> <span class="nv">false</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource scmPolicy2 'Microsoft.Web/sites/basicPublishingCredentialsPolicies@2022-03-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">scm'</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s1">'</span><span class="s">string'</span>
  <span class="na">parent</span><span class="pi">:</span> <span class="s">webApp2</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s">location</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">allow</span><span class="pi">:</span> <span class="nv">false</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp1Config 'Microsoft.Web/sites/config@2020-06-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">webApp1</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">web'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">ftpsState</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AllAllowed'</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp2Config 'Microsoft.Web/sites/config@2020-06-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">webApp2</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">web'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">ftpsState</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AllAllowed'</span>
    <span class="nv">scmIpSecurityRestrictionsDefaultAction</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deny'</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp1Binding 'Microsoft.Web/sites/hostNameBindings@2019-08-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">webApp1</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">${webApp1.name}${webapp_dns_name}'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">siteName</span><span class="pi">:</span> <span class="nv">webApp1.name</span>
    <span class="nv">hostNameType</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Verified'</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource webApp2Binding 'Microsoft.Web/sites/hostNameBindings@2019-08-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">webApp2</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">${webApp2.name}${webapp_dns_name}'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">siteName</span><span class="pi">:</span> <span class="nv">webApp2.name</span>
    <span class="nv">hostNameType</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Verified'</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource privateEndpoint 'Microsoft.Network/privateEndpoints@2020-06-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">privateEndpointName</span>
  <span class="s">location</span><span class="err">:</span> <span class="s">location</span>
  <span class="s">properties</span><span class="err">:</span> <span class="pi">{</span>
    <span class="nv">subnet</span><span class="pi">:</span> <span class="pi">{</span>
      <span class="nv">id</span><span class="pi">:</span> <span class="nv">resourceId('Microsoft.Network/virtualNetworks/subnets'</span><span class="pi">,</span> <span class="nv">virtualNetwork.name</span><span class="pi">,</span> <span class="nv">subnet1Name)</span>
    <span class="pi">}</span>
    <span class="nv">privateLinkServiceConnections</span><span class="pi">:</span> <span class="pi">[</span>
      <span class="pi">{</span>
        <span class="nv">name</span><span class="pi">:</span> <span class="nv">privateLinkConnectionName</span>
        <span class="nv">properties</span><span class="pi">:</span> <span class="pi">{</span>
          <span class="nv">privateLinkServiceId</span><span class="pi">:</span> <span class="nv">webApp1.id</span>
          <span class="nv">groupIds</span><span class="pi">:</span> <span class="pi">[</span>
            <span class="s1">'</span><span class="s">sites'</span>
          <span class="pi">]</span>
        <span class="pi">}</span>
      <span class="pi">}</span>
    <span class="pi">]</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource privateDnsZones 'Microsoft.Network/privateDnsZones@2018-09-01' = {</span>
  <span class="s">name</span><span class="err">:</span> <span class="s">privateDNSZoneName</span>
  <span class="s">location</span><span class="err">:</span> <span class="s1">'</span><span class="s">global'</span>
  <span class="na">dependsOn</span><span class="pi">:</span> <span class="pi">[</span>
    <span class="nv">virtualNetwork</span>
  <span class="pi">]</span>
<span class="err">}</span>

<span class="s">resource privateDnsZoneLink 'Microsoft.Network/privateDnsZones/virtualNetworkLinks@2018-09-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">privateDnsZones</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">${privateDnsZones.name}-link'</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s1">'</span><span class="s">global'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">registrationEnabled</span><span class="pi">:</span> <span class="nv">false</span>
    <span class="nv">virtualNetwork</span><span class="pi">:</span> <span class="pi">{</span>
      <span class="nv">id</span><span class="pi">:</span> <span class="nv">virtualNetwork.id</span>
    <span class="pi">}</span>
  <span class="pi">}</span>
<span class="err">}</span>

<span class="s">resource privateDnsZoneGroup 'Microsoft.Network/privateEndpoints/privateDnsZoneGroups@2020-03-01' = {</span>
  <span class="s">parent</span><span class="err">:</span> <span class="s">privateEndpoint</span>
  <span class="s">name</span><span class="err">:</span> <span class="s1">'</span><span class="s">dnsgroupname'</span>
  <span class="na">properties</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">privateDnsZoneConfigs</span><span class="pi">:</span> <span class="pi">[</span>
      <span class="pi">{</span>
        <span class="nv">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">config1'</span>
        <span class="nv">properties</span><span class="pi">:</span> <span class="pi">{</span>
          <span class="nv">privateDnsZoneId</span><span class="pi">:</span> <span class="nv">privateDnsZones.id</span>
        <span class="pi">}</span>
      <span class="pi">}</span>
    <span class="pi">]</span>
  <span class="pi">}</span>
<span class="err">}</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
          <p class="page__date"><strong><a href="https://docs.microsoft.com/answers/topics/azure-webapps.html">Post questions</a> | <a href="https://feedback.azure.com/forums/169385-web-apps">Provide product feedback</a></strong></p>
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2022-12-02T00:00:00+00:00">December 02, 2022</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=How+to+deploy+a+secure+n-tier+web+app%20https%3A%2F%2Fazure.github.io%2FAppService%2F2022%2F12%2F02%2Fn-tier-web-app.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fazure.github.io%2FAppService%2F2022%2F12%2F02%2Fn-tier-web-app.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fazure.github.io%2FAppService%2F2022%2F12%2F02%2Fn-tier-web-app.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/AppService/2022/12/02/multi-region-web-app.html" class="pagination--pager" title="How to deploy a highly available multi-region web app
">Previous</a>
    
    
      <a href="/AppService/2022/12/05/Making-diagnostics-analysis-easier-in-Diagnose-and-Solve.html" class="pagination--pager" title="Improving the dump analysis journey in Diagnose and Solve
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2025/11/04/app-service-agent-framework-part-3.html" rel="permalink">Part 3: Client-Side Multi-Agent Orchestration on Azure App Service with Microsoft Agent Framework
</a>
      
    </h2>
    
      <p class="page__meta">
        
          <i class="far fa-clock" aria-hidden="true"></i> 




  12 minute read

        
        
          • By Jordan Selig
        
        • November 4, 2025
      </p>
    
    <p class="archive__item-excerpt" itemprop="description">In Part 2 of this series, I showed you how to build sophisticated multi-agent systems on Azure App Service using Azure AI Foundry Agents—server-side managed ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2025/10/31/app-service-agent-framework-part-2.html" rel="permalink">Part 2: Build Long-Running AI Agents on Azure App Service with Microsoft Agent Framework
</a>
      
    </h2>
    
      <p class="page__meta">
        
          <i class="far fa-clock" aria-hidden="true"></i> 




  9 minute read

        
        
          • By Jordan Selig
        
        • October 31, 2025
      </p>
    
    <p class="archive__item-excerpt" itemprop="description">Last week, I shared how to build long-running AI agents on Azure App Service with Microsoft Agent Framework. If you haven’t seen that post yet, I would recom...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2025/10/29/node24-available.html" rel="permalink">Node.js 24 is now available on Azure App Service for Linux
</a>
      
    </h2>
    
      <p class="page__meta">
        
          <i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read

        
        
          • By Tulika Chaudharie
        
        • October 29, 2025
      </p>
    
    <p class="archive__item-excerpt" itemprop="description">Node.js 24 LTS is live on Azure App Service for Linux. You can create a new Node 24 app through the Azure portal, automate it with the Azure CLI, or roll it ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2025/10/29/VSTS-tasks-for-sidecars.html" rel="permalink">Azure Pipeline samples: add sidecars to Azure App Service for Linux
</a>
      
    </h2>
    
      <p class="page__meta">
        
          <i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

        
        
          • By Tulika Chaudharie
        
        • October 29, 2025
      </p>
    
    <p class="archive__item-excerpt" itemprop="description">Sidecars on Azure App Service let you attach extra containers — logging, telemetry, lightweight APIs, caches, AI inference helpers — alongside your main app,...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <label class="sr-only" for="cse-search-input-box-id">
      Enter your search term...
    </label>
    <input type="search" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results">
    <gcse:searchresults-only></gcse:searchresults-only>
  </div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  
    <a class="page-microsoft" href="https://www.microsoft.com"><img src="/AppService/media/pages/Microsoft_logo.svg" alt=""></a>
  
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/AzAppService" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/Azure/AppService" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/AppService/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Azure App Service. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/AppService/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>


<script>
  (function () {
    var cx = '015057007851139702326:ob8gaepprli';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
    $(document).ready(function () {
      $('input#cse-search-input-box-id').on('keyup', function () {
        googleCustomSearchExecute();
      });
    });
  
</script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-112478220-2']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>









  </body>
</html>
